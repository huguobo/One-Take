(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+5i3":function(t,i,e){},"9Tqu":function(t,i,e){},MHjc:function(t,i,e){},SYdV:function(t,i,e){},Vkb8:function(t,i,e){},Vtdi:function(t,i,e){"use strict";e.r(i);e("+5i3"),e("Vkb8"),e("MHjc"),e("9Tqu"),e("SYdV");var n=e("kSzJ"),o=e("EJyy"),s=e("HkJp"),a=e.n(s);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(t,i){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=[],o=e;o<i+e;o+=1)n.push("".concat(t).concat(o));return n};new(function(){function t(i){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),console.log("options is:",i),this.callbacks={loadProgress:[]},this.app=null,this.options=i,this.container=i.container||document.body,this.width=i.width||window.innerWidth,this.height=i.height||window.innerHeight,this.resource=i.resource||{sprites:[]},this.spritesAnimations=this.options.spritesAnimations||{},this.textsAnimations=this.options.textsAnimations||{},this.sprites={},this.texts={},this.aniIntervals=[],this.app=new n.Application({transparent:!0,width:this.width,height:this.height}),this.container.appendChild(this.app.view),console.log(this)}var i,e,s;return i=t,(e=[{key:"destroy",value:function(){this.aniIntervals.forEach((function(t){clearInterval(t)})),this.app.destroy(!0)}},{key:"start",value:function(){this.app.loader.add(this.resource.sprites).on("progress",this.loadProgress.bind(this)).load(this.setup.bind(this))}},{key:"loadProgress",value:function(t){this.emit("loadProgress",t.progress)}},{key:"setup",value:function(){this.initBg(),this.initTexts(),this.initSprites(),this.initTimeline(),this.initTouch(),this.emit("loadDone")}},{key:"initPIXI",value:function(){this.app=new n.Application({resolution:2,width:this.width,height:this.height}),this.container.appendChild(this.app.view)}},{key:"on",value:function(t,i){this.callbacks[t]=this.callbacks[t]||[],this.callbacks[t].push(i)}},{key:"off",value:function(t,i){var e=this.callbacks[t];if(e&&e instanceof Array){var n=e.indexOf(i);-1!==n&&e.splice(n,1)}}},{key:"emit",value:function(t,i){var e=this.callbacks[t];e&&e instanceof Array&&e.forEach((function(t){t(i)}))}},{key:"initBg",value:function(){this.bg=new n.Graphics,this.bg.beginFill(16645090),this.bg.drawRect(0,0,this.width,3*this.height),this.bg.endFill(),this.bg.x=0,this.bg.y=0,this.app.stage.addChild(this.bg),this.scrollHeight=this.bg.height-this.height}},{key:"initTexts",value:function(){var t=this;"object"===r(this.options.texts)&&Object.keys(this.options.texts).forEach((function(i){var e=t.options.texts[i],o=new n.Text(e.text,e.options);t.setAnchor(o,e.anchor),t.setPosition(o,e.position),e.link&&(o.interactive=!0,o.on("tap",(function(t){location.href=e.link}))),t.app.stage.addChild(o),t.texts[i]=o}))}},{key:"initSprites",value:function(){var t=this;"object"===r(this.options.sprites)&&Object.keys(this.options.sprites).forEach((function(i){console.log(i,t.options,t.app.loader.resources);var e=t.options.sprites[i],o=new n.Sprite(t.app.loader.resources[e.key].texture);t.setSize(o,e.size),t.setAnchor(o,e.anchor),t.setPosition(o,e.position),t.app.stage.addChild(o),t.sprites[i]=o}))}},{key:"setSize",value:function(t,i){if("widthFit"===i.mode){var e=this.width*i.width/t.width;t.scale.x=e,t.scale.y=e}else if("heightFit"===i.mode){var n=this.height*i.height/t.height;t.scale.x=n,t.scale.y=n}else t.width=i.width,t.height=i.height}},{key:"setAnchor",value:function(t,i){if("string"==typeof i){var e=this.positionMap(i);t.anchor.x=e.x,t.anchor.y=e.y}else t.anchor.x=i.x,t.anchor.y=i.y}},{key:"setPosition",value:function(t,i){"string"==typeof i&&(i=this.positionMap(i)),t.position.x=i.x*this.width,t.position.y=i.y*this.height}},{key:"positionMap",value:function(t){return{top:{x:.5,y:0},right:{x:1,y:.5},bottom:{x:.5,y:1},left:{x:0,y:.5},topLeft:{x:0,y:0},topRight:{x:1,y:0},bottomLeft:{x:0,y:1},bottomRight:{x:1,y:1},center:{x:.5,y:.5}}[t]||{x:0,y:0}}},{key:"initTimeline",value:function(){var t=this;this.timeline=new o.a({paused:!0}),Object.keys(this.spritesAnimations).forEach((function(i){t.setAnimation(t.sprites[i],t.spritesAnimations[i])})),Object.keys(this.textsAnimations).forEach((function(i){t.setAnimation(t.texts[i],t.textsAnimations[i])}));var i=o.b.fromTo(this.bg,1,{y:0},{y:-this.scrollHeight}),e=new o.a;e.add(i,0),this.timeline.add(e,0)}},{key:"setAnimation",value:function(t,i){var e=this;t&&i&&i instanceof Array&&i.forEach((function(i){var n=i.from,s=i.to,a=i.frames,r=i.infinite,h=i.frameRate,c=i.delay,l=void 0===c?0:c,p=i.duration,d=void 0===p?1:p;if(a)r?(t.frames=a,t.currentFrame=0,e.aniIntervals.push(setInterval((function(){t.currentFrame+=1,t.currentFrame>=t.frames.length&&(t.currentFrame=0);var i=t.frames[t.currentFrame];t.texture=e.app.loader.resources[i].texture}),1e3*d/h))):e.on("progress",(function(i){var n=(i-l)/d,o=Math.floor(n*a.length);if(o<a.length&&o>=0){var s=a[o];t.texture=e.app.loader.resources[s].texture}}));else if(n||s){var u;n&&s?u=o.b.fromTo(t,d,n,s):s?u=o.b.to(t,d,s):n&&(u=o.b.from(t,d,n));var f=new o.a({delay:l});f.add(u,0),f.play(),s&&-1===s.repeat||e.timeline.add(f,0)}}))}},{key:"initTouch",value:function(){var t=Object.assign({touch:"body"},this.options.touchOptions,{min:-this.bg.height+this.height,max:0,value:0,change:this.touchmove.bind(this)});this.alloyTouch=new a.a(t)}},{key:"touchmove",value:function(t){this.progress=-t/this.scrollHeight,this.progress=this.progress<0?0:this.progress,this.progress=this.progress>1?1:this.progress,this.timeline.seek(this.progress),this.emit("progress",this.progress)}}])&&h(i.prototype,e),s&&h(i,s),t}())({container:document.getElementById("app"),resource:function(){for(var t={sprites:[]},i=0;i<50;i+=1)t.sprites.push({name:"ani".concat(i),url:"".concat(".","/assets/imgs/ani/").concat(701+i,".png")});for(var e=0;e<62;e+=1)t.sprites.push({name:"girl".concat(e),url:"".concat(".","/assets/imgs/girl/").concat(160+e,".png")});for(var n=1;n<8;n+=1)t.sprites.push({name:"item".concat(n),url:"".concat(".","/assets/imgs/items/").concat(n,".png")});for(var o=0;o<25;o+=1)t.sprites.push({name:"plane".concat(o),url:"".concat(".","/assets/imgs/plane/").concat(408+o,".png")});return t}(),touchOptions:{touch:"#app",initialValue:0,sensitivity:.5,maxSpeed:.5},sprites:function(){for(var t={ani:{key:"ani0",size:{mode:"widthFit",width:1},position:"center",anchor:"center"},girl:{key:"girl0",size:{mode:"widthFit",width:1},position:"center",anchor:"center"},plane:{key:"plane0",size:{mode:"widthFit",width:.5},position:{x:.5,y:.4},anchor:"center"}},i=1;i<8;i+=1){var e=i%2==0?1.1:-.1;t["item".concat(i)]={key:"item".concat(i),size:{mode:"widthFit",width:.8},position:{x:e,y:1.4},anchor:"center"}}return t}(),spritesAnimations:function(){for(var t={ani:[{delay:.1,duration:.6,from:{alpha:0},to:{alpha:1}},{delay:.1,duration:.6,frames:c("ani",50)},{delay:.7,duration:.2,to:{alpha:0}},{delay:.7,duration:.2,frames:c("ani",50).reverse()}],girl:[{delay:0,duration:1,frames:c("girl",62)},{delay:0,duration:.2,from:{y:-window.innerHeight},to:{y:.5*window.innerHeight}},{delay:.7,duration:.3,to:{y:1.2*window.innerHeight}}],plane:[{duration:2,frames:c("plane",25),infinite:!0,frameRate:25},{delay:.8,duration:.2,from:{width:0,height:0,alpha:0}}]},i=1;i<8;i+=1){var e=.25+i/7*.2,n=i%2==0?.65*window.innerWidth:.35*window.innerWidth;t["item".concat(i)]=[{delay:e,duration:.2,to:{x:n,y:.2*-window.innerHeight,width:0,height:0}},{duration:.5+Math.random(),to:{yoyo:!0,repeat:-1,rotation:.1}}]}return t}(),texts:{guide:{text:"向上滑动，找回童年",position:{x:.5,y:.5},anchor:"center",options:{fontFamily:"Arial",fontSize:window.innerWidth/375*18,fill:16483135,align:"center"}},ad2:{text:"Powerd by: Pixi.js AlloyTouch TweenMax",position:{x:.5,y:.92},anchor:"center",options:{fontFamily:"Arial",fontSize:window.innerWidth/375*12,fill:16483135,align:"center"}},ad4:{text:"素材源自互联网，仅供学习交流，请勿商用！",position:{x:.5,y:.62},anchor:"center",options:{fontFamily:"Arial",fontSize:window.innerWidth/375*12,fill:16483135,align:"center"}}},textsAnimations:{guide:[{delay:0,duration:1,from:{y:.5*window.innerHeight},to:{yoyo:!0,repeat:-1,ease:"easeOut",y:.48*window.innerHeight}},{delay:0,duration:.1,to:{alpha:0}}],ad:[{delay:0,duration:.1,to:{alpha:0}}],ad2:[{delay:0,duration:.1,to:{alpha:0}}],ad3:[{delay:.9,duration:.1,from:{alpha:0,y:.53*window.innerHeight}}],ad4:[{delay:.9,duration:.1,from:{alpha:0,y:.57*window.innerHeight}}]}}).start()}},[["Vtdi",1,2]]]);